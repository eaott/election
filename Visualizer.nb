(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 10.1' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     48360,       1191]
NotebookOptionsPosition[     47632,       1161]
NotebookOutlinePosition[     47985,       1177]
CellTagsIndexPosition[     47942,       1174]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[{
 RowBox[{
  RowBox[{"SetDirectory", "[", 
   RowBox[{"NotebookDirectory", "[", "]"}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"data", "=", 
    RowBox[{"Import", "[", "\"\<like_data.csv\>\"", "]"}]}], ";"}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
   "Remove", " ", "the", " ", "last", " ", "\"\<empty\>\"", " ", "data", " ", 
    "cell"}], " ", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"names", "=", 
   RowBox[{"data", "[", 
    RowBox[{"[", 
     RowBox[{"1", ",", 
      RowBox[{"2", ";;"}]}], "]"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"times", "=", 
   RowBox[{"data", "[", 
    RowBox[{"[", 
     RowBox[{
      RowBox[{"2", ";;"}], ",", "1"}], "]"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"data", "=", 
   RowBox[{"data", "[", 
    RowBox[{"[", 
     RowBox[{
      RowBox[{"2", ";;"}], ",", 
      RowBox[{"2", ";;"}]}], "]"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"InvalidNum", "=", 
   RowBox[{"-", "1"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"emptyData", "=", 
   RowBox[{"Table", "[", 
    RowBox[{
     RowBox[{"Table", "[", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"Or", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"Length", "[", 
             RowBox[{"data", "[", 
              RowBox[{"[", "j", "]"}], "]"}], "]"}], "<", "i"}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"StringLength", "[", 
             RowBox[{"ToString", "[", 
              RowBox[{"data", "[", 
               RowBox[{"[", 
                RowBox[{"j", ",", "i"}], "]"}], "]"}], "]"}], "]"}], 
            "\[Equal]", "0"}]}], "]"}], ",", "\[IndentingNewLine]", 
         "InvalidNum", ",", 
         RowBox[{"data", "[", 
          RowBox[{"[", 
           RowBox[{"j", ",", "i"}], "]"}], "]"}]}], "]"}], 
       "\[IndentingNewLine]", "\[IndentingNewLine]", ",", 
       RowBox[{"{", 
        RowBox[{"i", ",", 
         RowBox[{"Length", "[", "names", "]"}]}], "}"}]}], "]"}], ",", 
     RowBox[{"{", 
      RowBox[{"j", ",", 
       RowBox[{"Length", "[", "data", "]"}]}], "}"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"data", "=", "emptyData"}], ";"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"lastNamesWithParty", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"(", 
      RowBox[{
       RowBox[{"split", "=", 
        RowBox[{"StringSplit", "[", "#", "]"}]}], ";", 
       RowBox[{"StringJoin", "[", 
        RowBox[{
         RowBox[{"split", "[", 
          RowBox[{"[", "2", "]"}], "]"}], ",", "\"\< \>\"", ",", 
         RowBox[{"split", "[", 
          RowBox[{"[", "3", "]"}], "]"}]}], "]"}]}], ")"}], "&"}], "/@", 
    "names"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"lastNamesWithoutParty", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"(", 
      RowBox[{
       RowBox[{"split", "=", 
        RowBox[{"StringSplit", "[", "#", "]"}]}], ";", 
       RowBox[{"split", "[", 
        RowBox[{"[", "2", "]"}], "]"}]}], ")"}], "&"}], "/@", "names"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Clear", "[", "split", "]"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
   "A", " ", "function", " ", "that", " ", "finds", " ", "the", " ", 
    "indices", " ", "of", " ", "all", " ", "elements", " ", "of", " ", "a", 
    " ", "list", " ", "of", " ", "strings", " ", "that", " ", "contain", " ", 
    "a", " ", "particular", " ", 
    RowBox[{"substring", "."}]}], " ", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"GetIndicesFromList", "[", 
    RowBox[{"list_List", ",", "str_String"}], "]"}], ":=", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", "vals", "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"vals", "=", 
       RowBox[{"Select", "[", 
        RowBox[{"list", ",", 
         RowBox[{
          RowBox[{"StringContainsQ", "[", 
           RowBox[{"#", ",", "str"}], "]"}], "&"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"Flatten", "[", 
       RowBox[{"Union", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Position", "[", 
           RowBox[{"list", ",", "#"}], "]"}], "&"}], "/@", "vals"}], "]"}], 
       "\[IndentingNewLine]", "]"}]}]}], "]"}]}], "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{"Republican", " ", "and", " ", "Democrat", " ", 
    RowBox[{"indices", "."}]}], " ", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"reps", "=", 
   RowBox[{"GetIndicesFromList", "[", 
    RowBox[{"names", ",", "\"\<(R)\>\""}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"dems", "=", 
    RowBox[{"GetIndicesFromList", "[", 
     RowBox[{"names", ",", "\"\<(D)\>\""}], "]"}]}], ";"}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
   "convert", " ", "a", " ", "data", " ", "set", " ", "where", " ", "each", 
    " ", "row", " ", "of", " ", "data", " ", "was", " ", "taken", " ", "at", 
    " ", "the", " ", "same", " ", "time"}], " ", 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ConvertToTimes", "[", 
   RowBox[{"data_List", ",", "times_List"}], "]"}], ":=", 
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"Length", "[", "data", "]"}], "\[NotEqual]", 
     RowBox[{"Length", "[", "times", "]"}]}], ",", 
    RowBox[{"Message", "[", 
     RowBox[{"ConvertToTimes", "::", "illegal"}], "]"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{"Table", "[", 
     RowBox[{
      RowBox[{"TimeSeries", "[", 
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{"times", "[", 
            RowBox[{"[", "i", "]"}], "]"}], ",", 
           RowBox[{"data", "[", 
            RowBox[{"[", 
             RowBox[{"i", ",", "j"}], "]"}], "]"}]}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", 
           RowBox[{"Length", "[", "times", "]"}]}], "}"}]}], "]"}], "]"}], 
      ",", 
      RowBox[{"{", 
       RowBox[{"j", ",", 
        RowBox[{"Length", "[", 
         RowBox[{"data", "[", 
          RowBox[{"[", "1", "]"}], "]"}], "]"}]}], "}"}]}], "]"}]}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"absoluteDiffData", "=", 
   RowBox[{"Table", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"data", "[", 
       RowBox[{"[", 
        RowBox[{"i", "+", "1"}], "]"}], "]"}], "-", 
      RowBox[{"data", "[", 
       RowBox[{"[", "i", "]"}], "]"}]}], ",", 
     RowBox[{"{", 
      RowBox[{"i", ",", "1", ",", 
       RowBox[{
        RowBox[{"Length", "[", "data", "]"}], "-", "1"}]}], "}"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"percentDiffData", "=", 
   RowBox[{"Table", "[", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"(", 
        RowBox[{
         RowBox[{"data", "[", 
          RowBox[{"[", 
           RowBox[{"i", "+", "1"}], "]"}], "]"}], "-", 
         RowBox[{"data", "[", 
          RowBox[{"[", "i", "]"}], "]"}]}], ")"}], "/", 
       RowBox[{"data", "[", 
        RowBox[{"[", "i", "]"}], "]"}]}], "//", "N"}], ",", 
     RowBox[{"{", 
      RowBox[{"i", ",", "1", ",", 
       RowBox[{
        RowBox[{"Length", "[", "data", "]"}], "-", "1"}]}], "}"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"titles", "=", 
    RowBox[{"{", 
     RowBox[{
     "\"\<Total Likes\>\"", ",", "\"\<Overnight Change (Absolute)\>\"", ",", 
      "\"\<Overnight Change (Percentage)\>\""}], "}"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"NewCandidate", "[", 
    RowBox[{
    "names_List", ",", "times_List", ",", "data_List", ",", 
     "filename_String"}], "]"}], ":=", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"ret", ",", "candidateVals"}], "}"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"Or", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Length", "[", "times", "]"}], "\[NotEqual]", 
          RowBox[{"Length", "[", "data", "]"}]}], ",", 
         RowBox[{
          RowBox[{"Length", "[", "names", "]"}], "\[NotEqual]", 
          RowBox[{"Length", "[", 
           RowBox[{"data", "[", 
            RowBox[{"[", "1", "]"}], "]"}], "]"}]}]}], "]"}], ",", 
       RowBox[{"Message", "[", 
        RowBox[{"NewCandidate", "::", "illegal"}], "]"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"ret", "=", 
         RowBox[{"Table", "[", 
          RowBox[{
           RowBox[{"Table", "[", 
            RowBox[{"\"\<\>\"", ",", 
             RowBox[{"{", 
              RowBox[{"c", ",", 
               RowBox[{
                RowBox[{"Length", "[", "names", "]"}], "+", "1"}]}], "}"}]}], 
            "]"}], ",", 
           RowBox[{"{", 
            RowBox[{"r", ",", 
             RowBox[{
              RowBox[{"Length", "[", "times", "]"}], "+", "1"}]}], "}"}]}], 
          "]"}]}], ";", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"ret", "[", 
          RowBox[{"[", 
           RowBox[{"1", ",", "1"}], "]"}], "]"}], "=", "\"\<Timestamp\>\""}], 
        ";", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"ret", "[", 
          RowBox[{"[", 
           RowBox[{"1", ",", 
            RowBox[{"2", ";;"}]}], "]"}], "]"}], "=", "names"}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"ret", "[", 
          RowBox[{"[", 
           RowBox[{
            RowBox[{"2", ";;"}], ",", "1"}], "]"}], "]"}], "=", "times"}], 
        ";", "\[IndentingNewLine]", 
        RowBox[{"candidateVals", "=", 
         RowBox[{"Table", "[", 
          RowBox[{
           RowBox[{"FirstCase", "[", 
            RowBox[{
             RowBox[{"data", "[", 
              RowBox[{"[", 
               RowBox[{"All", ",", "i"}], "]"}], "]"}], ",", 
             RowBox[{"_", "?", 
              RowBox[{"(", 
               RowBox[{
                RowBox[{"#", ">", "0"}], "&"}], ")"}]}]}], "]"}], ",", 
           RowBox[{"{", 
            RowBox[{"i", ",", 
             RowBox[{"Length", "[", "names", "]"}]}], "}"}]}], "]"}]}], ";", 
        "\[IndentingNewLine]", "\[IndentingNewLine]", 
        RowBox[{"(*", 
         RowBox[{
         "Update", " ", "the", " ", "rows", " ", "that", " ", "have", " ", 
          "the", " ", "bad", " ", "data", " ", "for", " ", "each", " ", "of", 
          " ", "the", " ", "new", " ", "candidates"}], "*)"}], 
        "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"ret", "[", 
          RowBox[{"[", 
           RowBox[{
            RowBox[{"2", ";;"}], ",", 
            RowBox[{"2", ";;"}]}], "]"}], "]"}], "=", 
         RowBox[{"Table", "[", 
          RowBox[{
           RowBox[{"Table", "[", 
            RowBox[{
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{
                RowBox[{"data", "[", 
                 RowBox[{"[", 
                  RowBox[{"c", ",", "r"}], "]"}], "]"}], "\[Equal]", 
                "InvalidNum"}], ",", 
               RowBox[{"candidateVals", "[", 
                RowBox[{"[", "r", "]"}], "]"}], ",", 
               RowBox[{"data", "[", 
                RowBox[{"[", 
                 RowBox[{"c", ",", "r"}], "]"}], "]"}]}], "]"}], ",", 
             RowBox[{"{", 
              RowBox[{"r", ",", 
               RowBox[{"Length", "[", "names", "]"}]}], "}"}]}], "]"}], ",", 
           RowBox[{"{", 
            RowBox[{"c", ",", 
             RowBox[{"Length", "[", "times", "]"}]}], "}"}]}], "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"Export", "[", 
         RowBox[{"filename", ",", "ret"}], "]"}]}]}], "\[IndentingNewLine]", 
      "]"}]}], "]"}]}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"NewCandidate", "[", 
    RowBox[{
    "names", ",", "times", ",", "data", ",", "\"\<like_data.csv\>\""}], "]"}],
    "*)"}]}], "\[IndentingNewLine]"}], "Input",
 CellChangeTimes->CompressedData["
1:eJwdzltIk3EAhvG1wJQo2cih1mQKmm6oF0OcOYaHLUzwtIMIc5GC5VYqTWtD
2sExD0jijWhdFUOztrQhatYkzdBEaEs0JDETWeOryVrlikZR//e7ePjdPqmN
bfImJoPBEJAgh+04dyozWHxtUi6GGdNpPjlRya18B7/+azqiILIjV5hwNDl8
DEZYj2LhQWoFC+q0LcmwVXY8E3rGXwngnjZOBHP81TVwiXdGBWvz9fVwVyl+
WUuscpfQZjzrXoGSPP4adHS2e+Fwx9tNOBur2oYpd6Y+wH2eMQBfjG5Q8EaO
7K+JaL5HMc1E+8ohG3ry1Qmwen3hNCwzWriwlGEvgAbKVAQlQxop7L/qVMDA
lHQH/hTxP0KvMfuhhbiaWE7Luf+t9zHRls0bgImazxM3s4LFPYHmSSiIsc+9
If65W7gMlRcUPqiu6aZ13jq7C79TnZ9gvav5AIa/CENwRDAegbw45i/oLwyf
9BLn580sWEGZUqBu7Cntc1taOuTU6WkXd/xC2MGlaPss1tzf+DuRLoFWZZYM
Fty+TBudE1bCi9edKqhasKqh6MnMJehI6tfCGP1RGxRvDz+A7q3zLjizJHXD
/aJZD2zhR5dh2XT7Kjz0/VBEidSgSwPX3281wNdddY0wGN+gg85QyAATBtts
sG/RQPsfXO9TYQ==
  "]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Module", "[", "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
    "labels", ",", "plotLabel", ",", "graph", ",", "graphTimes", ",", "fn", 
     ",", "styles"}], "}"}], ",", "\[IndentingNewLine]", 
   RowBox[{"Manipulate", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      RowBox[{"labels", "=", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Length", "[", "selection", "]"}], "\[Equal]", 
          RowBox[{"Length", "[", "names", "]"}]}], ",", "lastNamesWithParty", 
         ",", "lastNamesWithoutParty"}], "]"}]}], ";", "\[IndentingNewLine]", 
      
      RowBox[{"plotLabel", "=", 
       RowBox[{"titles", "[", 
        RowBox[{"[", "option", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"graph", "=", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"option", "\[Equal]", "1"}], ",", "data", ",", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"option", "\[Equal]", "2"}], ",", "absoluteDiffData", ",", 
           "percentDiffData"}], "]"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
      
      RowBox[{"graphTimes", "=", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"option", "\[Equal]", "1"}], ",", "times", ",", 
         RowBox[{"times", "[", 
          RowBox[{"[", 
           RowBox[{"2", ";;"}], "]"}], "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"fn", "=", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"scale", "\[Equal]", "1"}], ",", "DateListPlot", ",", 
         "DateListLogPlot"}], "]"}]}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"fn", "[", 
       RowBox[{
        RowBox[{"ConvertToTimes", "[", 
         RowBox[{
          RowBox[{"graph", "[", 
           RowBox[{"[", 
            RowBox[{"All", ",", "selection"}], "]"}], "]"}], ",", 
          "graphTimes"}], "]"}], ",", 
        RowBox[{"PlotLegends", "\[Rule]", 
         RowBox[{"labels", "[", 
          RowBox[{"[", "selection", "]"}], "]"}]}], ",", 
        "\[IndentingNewLine]", 
        RowBox[{"PlotLabel", "\[Rule]", "plotLabel"}], ",", 
        "\[IndentingNewLine]", 
        RowBox[{"PlotRange", "\[Rule]", "All"}]}], "]"}]}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"option", ",", "1"}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{"#", "\[Rule]", 
           RowBox[{"titles", "[", 
            RowBox[{"[", "#", "]"}], "]"}]}], ")"}], "&"}], "/@", 
        RowBox[{"Range", "[", 
         RowBox[{"Length", "[", "titles", "]"}], "]"}]}]}], "}"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"selection", ",", 
         RowBox[{"Range", "[", 
          RowBox[{"1", ",", 
           RowBox[{"Length", "[", "names", "]"}]}], "]"}]}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{
          RowBox[{"Range", "[", 
           RowBox[{"1", ",", 
            RowBox[{"Length", "[", "names", "]"}]}], "]"}], "\[Rule]", " ", 
          "\"\<All\>\""}], ",", 
         RowBox[{"reps", "\[Rule]", "\"\<Republicans\>\""}], ",", 
         RowBox[{"dems", "\[Rule]", "\"\<Democrats\>\""}]}], "}"}]}], "}"}], 
     ",", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"scale", ",", "1"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"1", "\[Rule]", "\"\<Normal\>\""}], ",", 
         RowBox[{"2", "->", "\"\<Log\>\""}]}], "}"}]}], "}"}]}], 
    "\[IndentingNewLine]", "]"}]}], "]"}]], "Input",
 CellChangeTimes->CompressedData["
1:eJwdzE0og3EABvBZbYeJlNJWQ2pmK6F87eBgS7OETLElmdSMJFOiJbOGYg7k
o0xG0hrWTlrIeh1oltYyB0NZ5iOzdy6SsiLv8z88/S7P8xT0DLXq2SwWK48J
XDtsGW+X0PKGT+ksTJh67bD+bXoL+quHPbDv684Lef0VFGzuXDuDi/xIFIoF
imd4qa5O0zCyOTE2vJGVp8O4xp0B67ipHDOjcVsjgJVFuVYoGuy2QV9LySpU
xvbtcOAm7oXXUfUVNG8IH+G9T5KCKp5zZxI/sT8iz0h5oOtUewAdWipgYawd
DRBlL526JSktr/GKh+G3f24d2ozOTWhvswZh6KIpBEsLF65JX5H1BPU9zwmo
VEZo2KXKG1tmNJXxTPDd4piHRyMTLnhuOHHDzKTIA/eoNwqOaX+Jkl1ukPSn
wmGYSM68Qu7dB1EUaKRhtkX9BcVVHT9kFzEQfce6/BXGXb6wGN4ucR5ghcwa
hf9wiut7
  "]],

Cell[BoxData[
 TagBox[
  StyleBox[
   DynamicModuleBox[{$CellContext`option$$ = 3, $CellContext`scale$$ = 
    1, $CellContext`selection$$ = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 
    14, 15, 16, 17, 18, 19, 20, 21}, Typeset`show$$ = True, 
    Typeset`bookmarkList$$ = {}, Typeset`bookmarkMode$$ = "Menu", 
    Typeset`animator$$, Typeset`animvar$$ = 1, Typeset`name$$ = 
    "\"untitled\"", Typeset`specs$$ = {{{
       Hold[$CellContext`option$$], 1}, {
      1 -> "Total Likes", 2 -> "Overnight Change (Absolute)", 3 -> 
       "Overnight Change (Percentage)"}}, {{
       Hold[$CellContext`selection$$], {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12,
        13, 14, 15, 16, 17, 18, 19, 20, 
       21}}, {{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 
        19, 20, 21} -> 
       "All", {7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21} -> 
       "Republicans", {1, 2, 3, 4, 5, 6} -> "Democrats"}}, {{
       Hold[$CellContext`scale$$], 1}, {1 -> "Normal", 2 -> "Log"}}}, 
    Typeset`size$$ = {714., {118., 123.}}, Typeset`update$$ = 0, 
    Typeset`initDone$$, Typeset`skipInitDone$$ = 
    True, $CellContext`option$17157$$ = 
    False, $CellContext`selection$17158$$ = 
    False, $CellContext`scale$17159$$ = False}, 
    DynamicBox[Manipulate`ManipulateBoxes[
     1, StandardForm, 
      "Variables" :> {$CellContext`option$$ = 1, $CellContext`scale$$ = 
        1, $CellContext`selection$$ = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 
         13, 14, 15, 16, 17, 18, 19, 20, 21}}, "ControllerVariables" :> {
        Hold[$CellContext`option$$, $CellContext`option$17157$$, False], 
        Hold[$CellContext`selection$$, $CellContext`selection$17158$$, False], 
        Hold[$CellContext`scale$$, $CellContext`scale$17159$$, False]}, 
      "OtherVariables" :> {
       Typeset`show$$, Typeset`bookmarkList$$, Typeset`bookmarkMode$$, 
        Typeset`animator$$, Typeset`animvar$$, Typeset`name$$, 
        Typeset`specs$$, Typeset`size$$, Typeset`update$$, Typeset`initDone$$,
         Typeset`skipInitDone$$}, 
      "Body" :> ($CellContext`labels$17155 = 
        If[Length[$CellContext`selection$$] == 
          Length[$CellContext`names], $CellContext`lastNamesWithParty, \
$CellContext`lastNamesWithoutParty]; $CellContext`plotLabel$17155 = 
        Part[$CellContext`titles, $CellContext`option$$]; \
$CellContext`graph$17155 = If[$CellContext`option$$ == 1, $CellContext`data, 
          
          If[$CellContext`option$$ == 
           2, $CellContext`absoluteDiffData, $CellContext`percentDiffData]]; \
$CellContext`graphTimes$17155 = 
        If[$CellContext`option$$ == 1, $CellContext`times, 
          Part[$CellContext`times, 
           Span[2, All]]]; $CellContext`fn$17155 = 
        If[$CellContext`scale$$ == 1, DateListPlot, 
          DateListLogPlot]; $CellContext`fn$17155[
         $CellContext`ConvertToTimes[
          
          Part[$CellContext`graph$17155, 
           All, $CellContext`selection$$], $CellContext`graphTimes$17155], 
         PlotLegends -> 
         Part[$CellContext`labels$17155, $CellContext`selection$$], 
         PlotLabel -> $CellContext`plotLabel$17155, PlotRange -> All]), 
      "Specifications" :> {{{$CellContext`option$$, 1}, {
         1 -> "Total Likes", 2 -> "Overnight Change (Absolute)", 3 -> 
          "Overnight Change (Percentage)"}}, {{$CellContext`selection$$, {1, 
          2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 
          21}}, {{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 
           18, 19, 20, 21} -> 
          "All", {7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21} -> 
          "Republicans", {1, 2, 3, 4, 5, 6} -> 
          "Democrats"}}, {{$CellContext`scale$$, 1}, {
         1 -> "Normal", 2 -> "Log"}}}, "Options" :> {}, 
      "DefaultOptions" :> {}],
     ImageSizeCache->{759., {186., 191.}},
     SingleEvaluation->True],
    Deinitialization:>None,
    DynamicModuleValues:>{},
    SynchronousInitialization->True,
    UndoTrackedVariables:>{Typeset`show$$, Typeset`bookmarkMode$$},
    UnsavedVariables:>{Typeset`initDone$$},
    UntrackedVariables:>{Typeset`size$$}], "Manipulate",
   Deployed->True,
   StripOnInput->False],
  Manipulate`InterpretManipulate[1]]], "Output",
 CellChangeTimes->{
  3.645679349448709*^9, 3.645793678660323*^9, 3.64579655699692*^9, 
   3.645796774356104*^9, 3.6458847486392384`*^9, 3.645887520935184*^9, {
   3.646065213114814*^9, 3.6460652426741943`*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Module", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
    "labels", ",", "plotLabel", ",", "graph", ",", "graphTimes", ",", 
     "totalLikes", ",", "labelfn"}], "}"}], ",", "\[IndentingNewLine]", 
   RowBox[{"Manipulate", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      RowBox[{"plotLabel", "=", 
       RowBox[{"titles", "[", 
        RowBox[{"[", "option", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"graph", "=", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"option", "\[Equal]", "1"}], ",", "data", ",", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"option", "\[Equal]", "2"}], ",", "absoluteDiffData", ",", 
           
           RowBox[{"percentDiffData", "//", "N"}]}], "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"graphTimes", "=", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"option", "\[Equal]", "1"}], ",", "times", ",", 
         RowBox[{"times", "[", 
          RowBox[{"[", 
           RowBox[{"2", ";;"}], "]"}], "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"labels", "=", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Length", "[", "selection", "]"}], "\[Equal]", 
          RowBox[{"Length", "[", "names", "]"}]}], ",", "lastNamesWithParty", 
         ",", "lastNamesWithoutParty"}], "]"}]}], ";", "\[IndentingNewLine]", 
      
      RowBox[{"timestamp", "=", 
       RowBox[{"Min", "[", 
        RowBox[{"timestamp", ",", 
         RowBox[{"Length", "[", "graphTimes", "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"totalLikes", "=", 
       RowBox[{"Total", "[", 
        RowBox[{"graph", "[", 
         RowBox[{"[", 
          RowBox[{"timestamp", ",", "selection"}], "]"}], "]"}], "]"}]}], ";",
       "\[IndentingNewLine]", 
      RowBox[{"labelfn", "=", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"show", "\[Equal]", "1"}], ",", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"Placed", "[", 
            RowBox[{
             RowBox[{"Row", "[", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"NumberForm", "[", 
                 RowBox[{
                  RowBox[{"IntegerPart", "[", 
                   RowBox[{"#", "/", "1000"}], "]"}], ",", 
                  RowBox[{"DigitBlock", "\[Rule]", "3"}]}], "]"}], ",", 
                "\"\<k\>\""}], "}"}], "]"}], ",", "\"\<RadialCenter\>\""}], 
            "]"}], "&"}], ")"}], ",", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"Placed", "[", 
            RowBox[{
             RowBox[{"Row", "[", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{
                 RowBox[{"N", "[", 
                  RowBox[{
                   RowBox[{"#", "/", "totalLikes"}], ",", "3"}], "]"}], "*", 
                 "100"}], ",", "\"\<%\>\""}], "}"}], "]"}], ",", 
             "\"\<RadialCenter\>\""}], "]"}], "&"}], ")"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"PieChart", "[", 
       RowBox[{
        RowBox[{"graph", "[", 
         RowBox[{"[", 
          RowBox[{"timestamp", ",", "selection"}], "]"}], "]"}], ",", 
        RowBox[{"ChartLabels", "\[Rule]", 
         RowBox[{"Placed", "[", 
          RowBox[{
           RowBox[{"labels", "[", 
            RowBox[{"[", "selection", "]"}], "]"}], ",", 
           "\"\<RadialCallout\>\""}], "]"}]}], ",", 
        RowBox[{"PlotLabel", "\[Rule]", 
         RowBox[{"plotLabel", "<>", "\"\<\\n\>\"", "<>", 
          RowBox[{"graphTimes", "[", 
           RowBox[{"[", "timestamp", "]"}], "]"}]}]}], ",", 
        "\[IndentingNewLine]", 
        RowBox[{"LabelingFunction", "\[Rule]", "labelfn"}]}], 
       "\[IndentingNewLine]", "]"}]}], ",", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"option", ",", "1"}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{"#", "\[Rule]", 
           RowBox[{"titles", "[", 
            RowBox[{"[", "#", "]"}], "]"}]}], ")"}], "&"}], "/@", 
        RowBox[{"Range", "[", 
         RowBox[{"Length", "[", "titles", "]"}], "]"}]}]}], "}"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{"timestamp", ",", "1", ",", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"option", "\[Equal]", "1"}], ",", 
         RowBox[{"Length", "[", "times", "]"}], ",", 
         RowBox[{
          RowBox[{"Length", "[", "times", "]"}], "-", "1"}]}], "]"}], ",", 
       "1"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"selection", ",", 
         RowBox[{"Range", "[", 
          RowBox[{"1", ",", 
           RowBox[{"Length", "[", "names", "]"}]}], "]"}]}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{
          RowBox[{"Range", "[", 
           RowBox[{"1", ",", 
            RowBox[{"Length", "[", "names", "]"}]}], "]"}], "\[Rule]", " ", 
          "\"\<All\>\""}], ",", 
         RowBox[{"reps", "\[Rule]", "\"\<Republicans\>\""}], ",", 
         RowBox[{"dems", "\[Rule]", "\"\<Democrats\>\""}]}], "}"}]}], "}"}], 
     ",", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"show", ",", "1"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"1", "\[Rule]", "\"\<Total Likes\>\""}], ",", 
         RowBox[{"2", "\[Rule]", "\"\<Percent Share\>\""}]}], "}"}]}], 
      "}"}]}], "]"}]}], "\[IndentingNewLine]", "]"}]], "Input",
 CellChangeTimes->CompressedData["
1:eJxTTMoPSmViYGAQBWIQ/XtB7Jw6jdeO3zb/ngeiD15JXwGiz03dCabzHLIu
gujH23Uugehn085p1QPpsDmbrEE0W90cexAdUujrDaKrVJkCQfSep8VhIHpF
tX80iF7zthtMO4luiQfRsZf2J4DoXX0fykB0luSPahBd93hyA4heMLeuGUTr
McTMBNExzFlg+uCjp3PB9gXyzAfRf29tcW4A0tdmFriAaLaK++0TgfQF9tYO
EC0wLfLEGc3Xjr8CDE+C6KmM16+A6Kbnn+6D6JDSJS9A9LSIk29A9NYcuY8g
elbADcazQFrf4QUbiNaauVUERL+w/SsJov9Iu0uDaJMPHxTB6t7+BtMAoXar
fg==
  "]],

Cell[BoxData[
 TagBox[
  StyleBox[
   DynamicModuleBox[{$CellContext`option$$ = 1, $CellContext`selection$$ = {1,
     2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 
    21}, $CellContext`show$$ = 2, $CellContext`timestamp$$ = 14, 
    Typeset`show$$ = True, Typeset`bookmarkList$$ = {}, 
    Typeset`bookmarkMode$$ = "Menu", Typeset`animator$$, Typeset`animvar$$ = 
    1, Typeset`name$$ = "\"untitled\"", Typeset`specs$$ = {{{
       Hold[$CellContext`option$$], 1}, {
      1 -> "Total Likes", 2 -> "Overnight Change (Absolute)", 3 -> 
       "Overnight Change (Percentage)"}}, {
      Hold[$CellContext`timestamp$$], 1, 
      Dynamic[
       If[$CellContext`option$$ == 1, 
        Length[$CellContext`times], Length[$CellContext`times] - 1]], 1}, {{
       Hold[$CellContext`selection$$], {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12,
        13, 14, 15, 16, 17, 18, 19, 20, 
       21}}, {{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 
        19, 20, 21} -> 
       "All", {7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21} -> 
       "Republicans", {1, 2, 3, 4, 5, 6} -> "Democrats"}}, {{
       Hold[$CellContext`show$$], 1}, {
      1 -> "Total Likes", 2 -> "Percent Share"}}}, Typeset`size$$ = {
    360., {194., 198.}}, Typeset`update$$ = 0, Typeset`initDone$$, 
    Typeset`skipInitDone$$ = True, $CellContext`option$23916$$ = 
    False, $CellContext`timestamp$23917$$ = 
    0, $CellContext`selection$23918$$ = False, $CellContext`show$23919$$ = 
    False}, 
    DynamicBox[Manipulate`ManipulateBoxes[
     1, StandardForm, 
      "Variables" :> {$CellContext`option$$ = 
        1, $CellContext`selection$$ = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 
         13, 14, 15, 16, 17, 18, 19, 20, 21}, $CellContext`show$$ = 
        1, $CellContext`timestamp$$ = 1}, "ControllerVariables" :> {
        Hold[$CellContext`option$$, $CellContext`option$23916$$, False], 
        Hold[$CellContext`timestamp$$, $CellContext`timestamp$23917$$, 0], 
        Hold[$CellContext`selection$$, $CellContext`selection$23918$$, False], 
        Hold[$CellContext`show$$, $CellContext`show$23919$$, False]}, 
      "OtherVariables" :> {
       Typeset`show$$, Typeset`bookmarkList$$, Typeset`bookmarkMode$$, 
        Typeset`animator$$, Typeset`animvar$$, Typeset`name$$, 
        Typeset`specs$$, Typeset`size$$, Typeset`update$$, Typeset`initDone$$,
         Typeset`skipInitDone$$}, 
      "Body" :> ($CellContext`plotLabel$23915 = 
        Part[$CellContext`titles, $CellContext`option$$]; \
$CellContext`graph$23915 = If[$CellContext`option$$ == 1, $CellContext`data, 
          If[$CellContext`option$$ == 2, $CellContext`absoluteDiffData, 
           N[$CellContext`percentDiffData]]]; $CellContext`graphTimes$23915 = 
        If[$CellContext`option$$ == 1, $CellContext`times, 
          Part[$CellContext`times, 
           Span[2, All]]]; $CellContext`labels$23915 = 
        If[Length[$CellContext`selection$$] == 
          Length[$CellContext`names], $CellContext`lastNamesWithParty, \
$CellContext`lastNamesWithoutParty]; $CellContext`timestamp$$ = 
        Min[$CellContext`timestamp$$, 
          
          Length[$CellContext`graphTimes$23915]]; \
$CellContext`totalLikes$23915 = Total[
          
          Part[$CellContext`graph$23915, $CellContext`timestamp$$, \
$CellContext`selection$$]]; $CellContext`labelfn$23915 = 
        If[$CellContext`show$$ == 1, Placed[
           Row[{
             NumberForm[
              IntegerPart[#/1000], DigitBlock -> 3], "k"}], "RadialCenter"]& ,
           Placed[
           Row[{N[#/$CellContext`totalLikes$23915, 3] 100, "%"}], 
           "RadialCenter"]& ]; PieChart[
         Part[$CellContext`graph$23915, $CellContext`timestamp$$, \
$CellContext`selection$$], ChartLabels -> Placed[
           Part[$CellContext`labels$23915, $CellContext`selection$$], 
           "RadialCallout"], PlotLabel -> 
         StringJoin[$CellContext`plotLabel$23915, "\n", 
           Part[$CellContext`graphTimes$23915, $CellContext`timestamp$$]], 
         LabelingFunction -> $CellContext`labelfn$23915]), 
      "Specifications" :> {{{$CellContext`option$$, 1}, {
         1 -> "Total Likes", 2 -> "Overnight Change (Absolute)", 3 -> 
          "Overnight Change (Percentage)"}}, {$CellContext`timestamp$$, 1, 
         Dynamic[
          If[$CellContext`option$$ == 1, 
           Length[$CellContext`times], Length[$CellContext`times] - 1]], 
         1}, {{$CellContext`selection$$, {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 
          12, 13, 14, 15, 16, 17, 18, 19, 20, 
          21}}, {{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 
           18, 19, 20, 21} -> 
          "All", {7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21} -> 
          "Republicans", {1, 2, 3, 4, 5, 6} -> 
          "Democrats"}}, {{$CellContext`show$$, 1}, {
         1 -> "Total Likes", 2 -> "Percent Share"}}}, "Options" :> {}, 
      "DefaultOptions" :> {}],
     ImageSizeCache->{429., {275., 280.}},
     SingleEvaluation->True],
    Deinitialization:>None,
    DynamicModuleValues:>{},
    SynchronousInitialization->True,
    UndoTrackedVariables:>{Typeset`show$$, Typeset`bookmarkMode$$},
    UnsavedVariables:>{Typeset`initDone$$},
    UntrackedVariables:>{Typeset`size$$}], "Manipulate",
   Deployed->True,
   StripOnInput->False],
  Manipulate`InterpretManipulate[1]]], "Output",
 CellChangeTimes->{3.645794470397399*^9, 3.6457945225675783`*^9, 
  3.645794576292165*^9, 3.64588753285849*^9, 3.645973275648477*^9, 
  3.646065247868182*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Module", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
    "labels", ",", "plotLabel", ",", "graph", ",", "tableData", ",", 
     "ordering"}], "}"}], ",", "\[IndentingNewLine]", 
   RowBox[{"Manipulate", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      RowBox[{"plotLabel", "=", 
       RowBox[{"titles", "[", 
        RowBox[{"[", "sort", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"graph", "=", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"sort", "\[Equal]", "1"}], ",", "data", ",", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"sort", "\[Equal]", "2"}], ",", "absoluteDiffData", ",", 
           RowBox[{"percentDiffData", "//", "N"}]}], "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"labels", "=", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Length", "[", "selection", "]"}], "\[Equal]", 
          RowBox[{"Length", "[", "names", "]"}]}], ",", "lastNamesWithParty", 
         ",", "lastNamesWithoutParty"}], "]"}]}], ";", "\[IndentingNewLine]", 
      
      RowBox[{"tableData", "=", 
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{"data", "[", 
            RowBox[{"[", 
             RowBox[{
              RowBox[{"timestamp", "+", "1"}], ",", "i"}], "]"}], "]"}], ",", 
           
           RowBox[{"absoluteDiffData", "[", 
            RowBox[{"[", 
             RowBox[{"timestamp", ",", "i"}], "]"}], "]"}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{"percentDiffData", "[", 
            RowBox[{"[", 
             RowBox[{"timestamp", ",", "i"}], "]"}], "]"}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"ToString", "[", 
             RowBox[{
              RowBox[{"percentDiffData", "[", 
               RowBox[{"[", 
                RowBox[{"timestamp", ",", "i"}], "]"}], "]"}], "*", "100"}], 
             "]"}], "<>", "\"\<%\>\""}]}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", "selection"}], "}"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"ordering", "=", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"sort", "\[Equal]", "0"}], ",", "\[IndentingNewLine]", 
         RowBox[{"Ordering", "[", 
          RowBox[{"labels", "[", 
           RowBox[{"[", "selection", "]"}], "]"}], "]"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{"Ordering", "[", 
          RowBox[{"tableData", ",", "All", ",", 
           RowBox[{
            RowBox[{
             RowBox[{"#1", "[", 
              RowBox[{"[", "sort", "]"}], "]"}], ">", 
             RowBox[{"#2", "[", 
              RowBox[{"[", "sort", "]"}], "]"}]}], "&"}]}], "]"}]}], "]"}]}], 
      ";", "\[IndentingNewLine]", 
      RowBox[{"ordering", "=", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"order", "\[Equal]", "1"}], ",", "ordering", ",", 
         RowBox[{"Reverse", "[", "ordering", "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"Labeled", "[", 
       RowBox[{
        RowBox[{"TableForm", "[", 
         RowBox[{
          RowBox[{"tableData", "[", 
           RowBox[{"[", 
            RowBox[{"ordering", ",", 
             RowBox[{"{", 
              RowBox[{"1", ",", "2", ",", "4"}], "}"}]}], "]"}], "]"}], ",", 
          RowBox[{"TableHeadings", "\[Rule]", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{"labels", "[", 
              RowBox[{"[", 
               RowBox[{"selection", "[", 
                RowBox[{"[", "ordering", "]"}], "]"}], "]"}], "]"}], ",", 
             RowBox[{"{", 
              RowBox[{
              "\"\<Total Likes\>\"", ",", 
               "\"\<Overnight Gains\\n(Absolute)\>\"", ",", 
               "\"\<Overnight Gains\\n(Percentage)\>\""}], "}"}]}], "}"}]}]}],
          "]"}], ",", 
        RowBox[{"\"\<Likes as of \>\"", "<>", 
         RowBox[{"times", "[", 
          RowBox[{"[", 
           RowBox[{"timestamp", "+", "1"}], "]"}], "]"}], "<>", 
         "\"\<\\n\>\""}], ",", "Top"}], "]"}]}], ",", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"sort", ",", "1"}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"Union", "[", 
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"(", 
            RowBox[{"#", "\[Rule]", 
             RowBox[{"titles", "[", 
              RowBox[{"[", "#", "]"}], "]"}]}], ")"}], "&"}], "/@", 
          RowBox[{"Range", "[", 
           RowBox[{"Length", "[", "titles", "]"}], "]"}]}], ",", 
         RowBox[{"{", 
          RowBox[{"0", "->", "\"\<Name\>\""}], "}"}]}], "]"}]}], "}"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"order", ",", "1"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"1", "\[Rule]", "\"\<Descending\>\""}], ",", 
         RowBox[{"2", "\[Rule]", "\"\<Ascending\>\""}]}], "}"}]}], "}"}], ",",
      "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{"timestamp", ",", "1", ",", 
       RowBox[{
        RowBox[{"Length", "[", "times", "]"}], "-", "1"}], ",", "1"}], "}"}], 
     ",", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"selection", ",", 
         RowBox[{"Range", "[", 
          RowBox[{"1", ",", 
           RowBox[{"Length", "[", "names", "]"}]}], "]"}]}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{
          RowBox[{"Range", "[", 
           RowBox[{"1", ",", 
            RowBox[{"Length", "[", "names", "]"}]}], "]"}], "\[Rule]", " ", 
          "\"\<All\>\""}], ",", 
         RowBox[{"reps", "\[Rule]", "\"\<Republicans\>\""}], ",", 
         RowBox[{"dems", "\[Rule]", "\"\<Democrats\>\""}]}], "}"}]}], "}"}]}],
     "]"}]}], "\[IndentingNewLine]", "]"}]], "Input",
 CellChangeTimes->{{3.645112906392879*^9, 3.6451129283142633`*^9}, {
  3.64511296451195*^9, 3.645113221748234*^9}, {3.645113260183146*^9, 
  3.645113392198317*^9}, {3.64511343413091*^9, 3.645113553209354*^9}, {
  3.64511365770011*^9, 3.6451137163853073`*^9}, {3.645113780346677*^9, 
  3.645113889634964*^9}, {3.645114073449009*^9, 3.645114223733941*^9}, {
  3.6451154976032677`*^9, 3.645115595960726*^9}, {3.6451156305604973`*^9, 
  3.645115631627939*^9}, {3.645115673611437*^9, 3.6451156784977207`*^9}, {
  3.645115744463456*^9, 3.645115828447712*^9}, {3.645115867083783*^9, 
  3.6451158938110943`*^9}, {3.645674226440522*^9, 3.6456742287039013`*^9}}],

Cell[BoxData[
 TagBox[
  StyleBox[
   DynamicModuleBox[{$CellContext`order$$ = 1, $CellContext`selection$$ = {1, 
    2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 
    21}, $CellContext`sort$$ = 1, $CellContext`timestamp$$ = 12, 
    Typeset`show$$ = True, Typeset`bookmarkList$$ = {}, 
    Typeset`bookmarkMode$$ = "Menu", Typeset`animator$$, Typeset`animvar$$ = 
    1, Typeset`name$$ = "\"untitled\"", Typeset`specs$$ = {{{
       Hold[$CellContext`sort$$], 1}, {
      0 -> "Name", 1 -> "Total Likes", 2 -> "Overnight Change (Absolute)", 3 -> 
       "Overnight Change (Percentage)"}}, {{
       Hold[$CellContext`order$$], 1}, {
      1 -> "Descending", 2 -> "Ascending"}}, {
      Hold[$CellContext`timestamp$$], 1, 12, 1}, {{
       Hold[$CellContext`selection$$], {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12,
        13, 14, 15, 16, 17, 18, 19, 20, 
       21}}, {{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 
        19, 20, 21} -> 
       "All", {7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21} -> 
       "Republicans", {1, 2, 3, 4, 5, 6} -> "Democrats"}}}, Typeset`size$$ = {
    497., {192., 234.}}, Typeset`update$$ = 0, Typeset`initDone$$, 
    Typeset`skipInitDone$$ = True, $CellContext`sort$7170$$ = 
    False, $CellContext`order$7171$$ = False, $CellContext`timestamp$7172$$ = 
    0, $CellContext`selection$7173$$ = False}, 
    DynamicBox[Manipulate`ManipulateBoxes[
     1, StandardForm, 
      "Variables" :> {$CellContext`order$$ = 
        1, $CellContext`selection$$ = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 
         13, 14, 15, 16, 17, 18, 19, 20, 21}, $CellContext`sort$$ = 
        1, $CellContext`timestamp$$ = 1}, "ControllerVariables" :> {
        Hold[$CellContext`sort$$, $CellContext`sort$7170$$, False], 
        Hold[$CellContext`order$$, $CellContext`order$7171$$, False], 
        Hold[$CellContext`timestamp$$, $CellContext`timestamp$7172$$, 0], 
        Hold[$CellContext`selection$$, $CellContext`selection$7173$$, False]},
       "OtherVariables" :> {
       Typeset`show$$, Typeset`bookmarkList$$, Typeset`bookmarkMode$$, 
        Typeset`animator$$, Typeset`animvar$$, Typeset`name$$, 
        Typeset`specs$$, Typeset`size$$, Typeset`update$$, Typeset`initDone$$,
         Typeset`skipInitDone$$}, 
      "Body" :> ($CellContext`plotLabel$7169 = 
        Part[$CellContext`titles, $CellContext`sort$$]; \
$CellContext`graph$7169 = If[$CellContext`sort$$ == 1, $CellContext`data, 
          If[$CellContext`sort$$ == 2, $CellContext`absoluteDiffData, 
           N[$CellContext`percentDiffData]]]; $CellContext`labels$7169 = 
        If[Length[$CellContext`selection$$] == 
          Length[$CellContext`names], $CellContext`lastNamesWithParty, \
$CellContext`lastNamesWithoutParty]; $CellContext`tableData$7169 = Table[{
           
           Part[$CellContext`data, $CellContext`timestamp$$ + 
            1, $CellContext`i], 
           
           Part[$CellContext`absoluteDiffData, $CellContext`timestamp$$, \
$CellContext`i], 
           
           Part[$CellContext`percentDiffData, $CellContext`timestamp$$, \
$CellContext`i], 
           StringJoin[
            ToString[
            Part[$CellContext`percentDiffData, $CellContext`timestamp$$, \
$CellContext`i] 100], 
            "%"]}, {$CellContext`i, $CellContext`selection$$}]; \
$CellContext`ordering$7169 = If[$CellContext`sort$$ == 0, 
          Ordering[
           Part[$CellContext`labels$7169, $CellContext`selection$$]], 
          
          Ordering[$CellContext`tableData$7169, All, 
           Part[#, $CellContext`sort$$] > 
           Part[#2, $CellContext`sort$$]& ]]; $CellContext`ordering$7169 = 
        If[$CellContext`order$$ == 1, $CellContext`ordering$7169, 
          Reverse[$CellContext`ordering$7169]]; Labeled[
         TableForm[
          
          Part[$CellContext`tableData$7169, $CellContext`ordering$7169, {1, 2,
            4}], TableHeadings -> {
            Part[$CellContext`labels$7169, 
             Part[$CellContext`selection$$, $CellContext`ordering$7169]], {
            "Total Likes", "Overnight Gains\n(Absolute)", 
             "Overnight Gains\n(Percentage)"}}], 
         StringJoin["Likes as of ", 
          Part[$CellContext`times, $CellContext`timestamp$$ + 1], "\n"], 
         Top]), "Specifications" :> {{{$CellContext`sort$$, 1}, {
         0 -> "Name", 1 -> "Total Likes", 2 -> "Overnight Change (Absolute)", 
          3 -> "Overnight Change (Percentage)"}}, {{$CellContext`order$$, 
          1}, {1 -> "Descending", 2 -> 
          "Ascending"}}, {$CellContext`timestamp$$, 1, 12, 
         1}, {{$CellContext`selection$$, {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 
          12, 13, 14, 15, 16, 17, 18, 19, 20, 
          21}}, {{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 
           18, 19, 20, 21} -> 
          "All", {7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21} -> 
          "Republicans", {1, 2, 3, 4, 5, 6} -> "Democrats"}}}, 
      "Options" :> {}, "DefaultOptions" :> {}],
     ImageSizeCache->{542., {292., 297.}},
     SingleEvaluation->True],
    Deinitialization:>None,
    DynamicModuleValues:>{},
    SynchronousInitialization->True,
    UndoTrackedVariables:>{Typeset`show$$, Typeset`bookmarkMode$$},
    UnsavedVariables:>{Typeset`initDone$$},
    UntrackedVariables:>{Typeset`size$$}], "Manipulate",
   Deployed->True,
   StripOnInput->False],
  Manipulate`InterpretManipulate[1]]], "Output",
 CellChangeTimes->{{3.6451130207206984`*^9, 3.645113026842754*^9}, 
   3.645113100679207*^9, {3.645113145243327*^9, 3.645113194542913*^9}, {
   3.6451132775132647`*^9, 3.6451133095113783`*^9}, {3.645113348712111*^9, 
   3.64511336210282*^9}, {3.645113501844079*^9, 3.645113553442555*^9}, {
   3.645113660947652*^9, 3.64511366613037*^9}, {3.645113703099092*^9, 
   3.645113716840609*^9}, {3.645113877920011*^9, 3.645113890314942*^9}, 
   3.6451140257966843`*^9, {3.645114077495928*^9, 3.6451140918886213`*^9}, {
   3.645114152767679*^9, 3.6451141649744787`*^9}, 3.645114224095096*^9, {
   3.645115532602747*^9, 3.645115537218329*^9}, 3.6451156011239853`*^9, 
   3.6451156322898493`*^9, 3.645115679115719*^9, 3.64511582986285*^9, {
   3.645115869227529*^9, 3.6451158942222757`*^9}, 3.6451231287662973`*^9, 
   3.6451482883734713`*^9, 3.6452346453333063`*^9, 3.645273268477652*^9, 
   3.645321225403405*^9, 3.645445230234026*^9, 3.6454648244680634`*^9, 
   3.645617576400185*^9, 3.6456734995744953`*^9, 3.645679376458247*^9, 
   3.645793696706963*^9, 3.6457968039840117`*^9, 3.645887555797752*^9, 
   3.645973261282464*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Position", "[", " ", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     RowBox[{"-", "1"}], ",", 
     RowBox[{"-", "1"}], ",", "2"}], "}"}], ",", 
   RowBox[{"-", "1"}]}], "]"}]], "Input",
 CellChangeTimes->{{3.6458853296818657`*^9, 3.645885338128787*^9}}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", "1", "}"}], ",", 
   RowBox[{"{", "2", "}"}]}], "}"}]], "Output",
 CellChangeTimes->{3.645885338440387*^9}]
}, Open  ]]
},
WindowSize->{720, 802},
WindowMargins->{{0, Automatic}, {Automatic, 0}},
FrontEndVersion->"10.1 for Mac OS X x86 (32-bit, 64-bit Kernel) (March 23, \
2015)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[558, 20, 12904, 360, 1083, "Input"],
Cell[CellGroupData[{
Cell[13487, 384, 4232, 109, 386, "Input"],
Cell[17722, 495, 4483, 84, 394, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[22242, 584, 6093, 157, 522, "Input"],
Cell[28338, 743, 5544, 104, 606, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[33919, 852, 6634, 165, 522, "Input"],
Cell[40556, 1019, 6580, 119, 606, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[47173, 1143, 277, 8, 28, "Input"],
Cell[47453, 1153, 163, 5, 28, "Output"]
}, Open  ]]
}
]
*)

(* End of internal cache information *)
